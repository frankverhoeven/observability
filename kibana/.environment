# Decode the built-in credentials object variable.
export RELATIONSHIPS_JSON=$(echo $PLATFORM_RELATIONSHIPS | base64 --decode)

# Set environment variables for individual credentials.
export OS_SCHEME=$(echo $RELATIONSHIPS_JSON | jq -r ".searchelastic[0].scheme")
export OS_HOST=$(echo $RELATIONSHIPS_JSON | jq -r ".searchelastic[0].host")
export OS_PORT=$(echo $RELATIONSHIPS_JSON | jq -r ".searchelastic[0].port")

# Surface more common OpenSearch connection string variables for use in app.
export ELASTICSEARCH_USERNAME=$(echo $RELATIONSHIPS_JSON | jq -r ".searchelastic[0].username")
export ELASTICSEARCH_PASSWORD=$(echo $RELATIONSHIPS_JSON  | jq -r ".searchelastic[0].password")
export ELASTICSEARCH_HOSTS=[\"$OS_SCHEME://$OS_HOST:$OS_PORT\"]
